From fc97a037989e248a774f8f1b2fcbd2c5383ef11d Mon Sep 17 00:00:00 2001
From: Patrick McCarty <patrick.mccarty@intel.com>
Date: Thu, 5 Jul 2018 12:45:49 -0700
Subject: [PATCH] Fix build for cve-2015-3290.c

In the test header, we see:

    * Build with -O2.  Don't use -fno-omit-frame-pointer.

Since the test is meant to be built in a certain way, we override the
default CFLAGS just for this source file.

Signed-off-by: Patrick McCarty <patrick.mccarty@intel.com>
---
 testcases/cve/Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/testcases/cve/Makefile b/testcases/cve/Makefile
index 3a05dd4..1661cf5 100644
--- a/testcases/cve/Makefile
+++ b/testcases/cve/Makefile
@@ -39,6 +39,6 @@ endif
 cve-2017-17052:	CFLAGS += -pthread
 cve-2017-17053:	CFLAGS += -pthread
 
-cve-2015-3290:	CFLAGS += -pthread
+cve-2015-3290:	CFLAGS += -pthread -fomit-frame-pointer
 
 include $(top_srcdir)/include/mk/generic_leaf_target.mk
-- 
2.18.0

